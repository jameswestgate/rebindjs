/*! rebind 2014-12-28 */
!function(a,b){if("object"==typeof exports&&exports)b(exports);else{var c={};b(c),"function"==typeof define&&define.amd?define(c):a.Mustache=c}}(this,function(a){function b(a,b){return n.call(a,b)}function c(a){return!b(o,a)}function d(a){return"function"==typeof a}function e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function f(a){return String(a).replace(/[&<>"'\/]/g,function(a){return r[a]})}function g(a){if(!q(a)||2!==a.length)throw new Error("Invalid tags: "+a);return[new RegExp(e(a[0])+"\\s*"),new RegExp("\\s*"+e(a[1]))]}function h(b,d){function f(){if(A&&!B)for(;z.length;)delete y[z.pop()];else z=[];A=!1,B=!1}d=d||a.tags,b=b||"","string"==typeof d&&(d=d.split(t));for(var h,l,m,n,o,p,q=g(d),r=new k(b),x=[],y=[],z=[],A=!1,B=!1;!r.eos();){if(h=r.pos,m=r.scanUntil(q[0]))for(var C=0,D=m.length;D>C;++C)n=m.charAt(C),c(n)?z.push(y.length):B=!0,y.push(["text",n,h,h+1]),h+=1,"\n"===n&&f();if(!r.scan(q[0]))break;if(A=!0,l=r.scan(w)||"name",r.scan(s),"="===l?(m=r.scanUntil(u),r.scan(u),r.scanUntil(q[1])):"{"===l?(m=r.scanUntil(new RegExp("\\s*"+e("}"+d[1]))),r.scan(v),r.scanUntil(q[1]),l="&"):m=r.scanUntil(q[1]),!r.scan(q[1]))throw new Error("Unclosed tag at "+r.pos);if(o=[l,m,h,r.pos],y.push(o),"#"===l||"^"===l)x.push(o);else if("/"===l){if(p=x.pop(),!p)throw new Error('Unopened section "'+m+'" at '+h);if(p[1]!==m)throw new Error('Unclosed section "'+p[1]+'" at '+h)}else"name"===l||"{"===l||"&"===l?B=!0:"="===l&&(q=g(d=m.split(t)))}if(p=x.pop())throw new Error('Unclosed section "'+p[1]+'" at '+r.pos);return j(i(y))}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function j(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function k(a){this.string=a,this.tail=a,this.pos=0}function l(a,b){this.view=null==a?{}:a,this.cache={".":this.view},this.parent=b}function m(){this.cache={}}var n=RegExp.prototype.test,o=/\S/,p=Object.prototype.toString,q=Array.isArray||function(a){return"[object Array]"===p.call(a)},r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},s=/\s*/,t=/\s+/,u=/\s*=/,v=/\s*\}/,w=/#|\^|\/|>|\{|&|=|!/;k.prototype.eos=function(){return""===this.tail},k.prototype.scan=function(a){var b=this.tail.match(a);if(b&&0===b.index){var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c}return""},k.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},l.prototype.push=function(a){return new l(a,this)},l.prototype.lookup=function(a){var b;if(a in this.cache)b=this.cache[a];else{for(var c=this;c;){if(a.indexOf(".")>0){b=c.view;for(var e=a.split("."),f=0;null!=b&&f<e.length;)b=b[e[f++]]}else b=c.view[a];if(null!=b)break;c=c.parent}this.cache[a]=b}return d(b)&&(b=b.call(this.view)),b},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=h(a,b)),d},m.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof l?b:new l(b);return this.renderTokens(d,e,c,a)},m.prototype.renderTokens=function(b,c,e,f){function g(a){return k.render(a,c,e)}for(var h,i,j="",k=this,l=0,m=b.length;m>l;++l)switch(h=b[l],h[0]){case"#":if(i=c.lookup(h[1]),!i)continue;if(q(i))for(var n=0,o=i.length;o>n;++n)j+=this.renderTokens(h[4],c.push(i[n]),e,f);else if("object"==typeof i||"string"==typeof i)j+=this.renderTokens(h[4],c.push(i),e,f);else if(d(i)){if("string"!=typeof f)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,f.slice(h[3],h[5]),g),null!=i&&(j+=i)}else j+=this.renderTokens(h[4],c,e,f);break;case"^":i=c.lookup(h[1]),(!i||q(i)&&0===i.length)&&(j+=this.renderTokens(h[4],c,e,f));break;case">":if(!e)continue;i=d(e)?e(h[1]):e[h[1]],null!=i&&(j+=this.renderTokens(this.parse(i),c,e,i));break;case"&":i=c.lookup(h[1]),null!=i&&(j+=i);break;case"name":i=c.lookup(h[1]),null!=i&&(j+=a.escape(i));break;case"text":j+=h[1]}return j},a.name="mustache.js",a.version="0.8.1",a.tags=["{{","}}"];var x=new m;a.clearCache=function(){return x.clearCache()},a.parse=function(a,b){return x.parse(a,b)},a.render=function(a,b,c){return x.render(a,b,c)},a.to_html=function(b,c,e,f){var g=a.render(b,c,e);return d(f)?void f(g):g},a.escape=f,a.Scanner=k,a.Context=l,a.Writer=m}),this.rebind=this.rebind||{},function(a){function b(a){for(var b,d={},e={},f=0,g=a.length;g>f;f++)b=a[f],d[b.id?b.id:c(b,e)]=b;return d}function c(a,b){var c=a.tagName?a.tagName:"x"+a.nodeType;return b[c]||(b[c]=0),b[c]++,c+b[c]}function d(a,b,c){function d(c){var d=c.target||c.srcElement||c.originalTarget,e=d.getAttribute("name")||d.getAttribute("data-name");if(e){for(var f=[];d!==a;)d._section&&f.push([d._section,d._index]),d=d.parentNode;for(var g,h=b;f.length;)g=f.pop(),h[g[0]]&&(h=h[g[0]],h[parseInt(g[1],10)]&&(h=h[parseInt(g[1],10)]));h[e]=c.target.value}}a.removeEventListener("change",d),c||a.addEventListener("change",d)}var e,f,g,h=Object.prototype.toString,i=Array.isArray||function(a){return"[object Array]"===h.call(a)};a.reset=function(){e=new a.Writer,f={},g=new Mustache.Context(f)},a.Writer=function(){},a.Writer.prototype=new Mustache.Writer,a.Writer.prototype.renderTokens=function(a,b,c,d){function e(a){return j.render(a,b,c)}for(var f,g,h="",j=this,k=0,l=a.length;l>k;++k)switch(f=a[k],f[0]){case"#":if(g=b.lookup(f[1]),!g)continue;if(i(g))for(var m=0,n=g.length;n>m;++m){var o=b.push(g[m]),p=o.cache;p["@index"]=m,p["@index1"]=m+1,p["@first"]=0===m?"first":"",p["@last"]=m+1===n?"last":"",p["@even"]=m%2===0?"even":"",p["@odd"]=m%2===1?"odd":"",h+="<!--#rebind "+f[1]+","+m+"-->",h+=this.renderTokens(f[4],o,c,d),h+="<!--/rebind-->"}else if("object"==typeof g||"string"==typeof g)h+=this.renderTokens(f[4],b.push(g),c,d);else if("function"==typeof g){if("string"!=typeof d)throw new Error("Cannot use higher-order sections without the original template");g=g.call(b.view,d.slice(f[3],f[5]),e),null!=g&&(h+=g)}else h+=this.renderTokens(f[4],b,c,d);break;case"^":g=b.lookup(f[1]),(!g||i(g)&&0===g.length)&&(h+=this.renderTokens(f[4],b,c,d));break;case">":if(!c)continue;g="function"==typeof c?c(f[1]):c[f[1]],null!=g&&(h+=this.renderTokens(this.parse(g),b,c,g));break;case"&":g=b.lookup(f[1]),null!=g&&(h+=g);break;case"name":g=b.lookup(f[1]),null!=g&&(h+=Mustache.escape(g));break;case"text":h+=f[1]}return h=h.replace(/<!--\s*<!--/g,"<!--"),h=h.replace(/-->\s*-->/g,"-->")},a.Writer.prototype.postRender=function(b){for(var c,d,e=b.childNodes,f=[],g=0,h=e.length;h>g;g++)c=e[g],8===c.nodeType&&(0===c.nodeValue.lastIndexOf("#rebind")?(d=c.nodeValue.substring(8).split(","),f.push(c)):0===c.nodeValue.lastIndexOf("/rebind")&&(d=null,f.push(c))),d&&(c._section=d[0],c._index=d[1]),c.childNodes&&a.Writer.prototype.postRender(c);for(var i=0,h=f.length;h>i;i++)b.removeChild(f[i])},a.ViewModel=function(a){if("string"==typeof a&&(a=document.getElementById(a)),this.element=a,this.id=this.element.id,!this.id)throw new Error("Template element must have an id attribute.")},a.ViewModel.prototype.clear=function(){this.element=null,this.detach()},a.ViewModel.prototype.render=function(b){this.template=this.element.outerHTML,this.tokens=e.parse(this.template),a.inject(this.tokens);var c=a.getContext(b,f),d=e.renderTokens(this.tokens,c,null,this.template);this.element.outerHTML=d,this.element=document.getElementById(this.id),e.postRender(this.element)},a.ViewModel.prototype.merge=function(b){var c=document.createElement("div");document.createDocumentFragment().appendChild(c),c.innerHTML=e.renderTokens(this.tokens,a.getContext(b),null,this.template),e.postRender(c),a.mergeNodes(c.firstChild,this.element,!1)},a.ViewModel.prototype.apply=function(a){var b=this.template&&this.tokens?"merge":"render";this[b](a),this.attach(a)},a.ViewModel.prototype.attach=function(a){d(this.element,a,!1)},a.ViewModel.prototype.detach=function(a){d(this.element,a,!0)},a.registerHelper=function(a,b){f[a]=function(){return function(){for(var a=arguments[0].split(" "),c=[],d=0,e=a.length;e>d;d++){var f=a[d],g=f.slice(0,1),h=f.slice(-1);c.push('"'===g&&'"'===h||"'"===g&&"'"===h?f.slice(1,-1):this[f])}return c.push(arguments[1]),b.apply(this,c)}}},a.getContext=function(a){return new Mustache.Context(a,g)},a.create=function(b){return new a.ViewModel(b)},a.inject=function(b){for(var c=0;c<b.length;){var d=b[c],e="#"===d[0]||"^"===d[0],f="name"===d[0]&&d[1].indexOf(" ")>0;if(f){var g=d[1].split(" "),h=d[3],i=d[2]+g[0].length+3,j=g.shift(),k=g.join(" ");d[0]="#",d[1]=j,d[3]=i,d.push(["name",k,i,h-2]),d.push(h-2)}e&&a.inject(d[4]),c++}},a.mergeNodes=function(d,e,f){if(e._section=null,e._index=null,d.section&&(e._section=d._section,e._index=d._index),3===d.nodeType&&3===e.nodeType||8===d.nodeType&&8===e.nodeType)return void(e.nodeValue!==d.nodeValue&&(e.nodeValue=d.nodeValue));if(d.attributes&&e.attributes){for(var g,h,i=d.attributes,j=0,k=i.length;k>j;j++)g=i[j].nodeValue,h=i[j].nodeName,e.getAttribute(h)!==g&&e.setAttribute(h,g);if(f){i=e.attributes;for(var j=0,k=i.length;k>j;j++)h=i[j].nodeName,null===d.getAttribute(h)&&e.removeAttribute(h)}}if(!d.isEqualNode(e)){if(d.childNodes&&e.childNodes){for(var l=b(e.childNodes),m={},n=d.childNodes,j=0,k=n.length;k>j;j++){var o=n[j],p=e.childNodes[j],q=o.id?o.id:c(o,m),r=l[q];r?r!==p&&e.insertBefore(r,p):e.insertBefore(o.cloneNode(!0),p)}for(;e.childNodes.length>d.childNodes.length;){var s=e.childNodes[e.childNodes.length-1];e.removeChild(s)}}var t=d.childNodes.length;if(t)for(var j=0;t>j;j++)a.mergeNodes(d.childNodes[j],e.childNodes[j],f)}},a.reset()}(this.rebind);